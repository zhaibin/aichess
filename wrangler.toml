name = "aichess"
main = "src/index.ts"
compatibility_date = "2024-11-01"

[ai]
binding = "AI"

[[durable_objects.bindings]]
name = "GAME_STATE"
class_name = "GameState"

[[durable_objects.bindings]]
name = "WEBSOCKET_ROOM"
class_name = "WebSocketRoom"

[[durable_objects.bindings]]
name = "USER_STORE"
class_name = "UserStore"

[[migrations]]
tag = "v1"
new_classes = ["GameState"]

[[migrations]]
tag = "v2"
new_classes = ["WebSocketRoom", "UserStore"]

[[queues.producers]]
binding = "AI_GAME_QUEUE"
queue = "ai-game-queue"

[[queues.consumers]]
queue = "ai-game-queue"
max_batch_size = 1
max_retries = 3
dead_letter_queue = "ai-game-queue-dlq"

[vars]
ENVIRONMENT = "production"

